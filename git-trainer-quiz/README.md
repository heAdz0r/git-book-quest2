# Управляем КП - Git Тренажер

Интерактивная система обучения Git для коммерческого департамента "Флант".

## Описание

Этот проект представляет собой веб-приложение викторины, которое проверяет знания Git на основе созданного Git-репозитория с историей коммерческого предложения. Система состоит из двух частей:

1. **Bash-скрипт** (будет создан позже) - генерирует Git-репозиторий с предопределенной историей
2. **Веб-приложение** - интерактивная викторина для проверки знаний Git

## Технологии

- **Runtime**: Bun
- **Frontend**: React.js
- **Стилизация**: CSS
- **Криптография**: crypto-js (SHA-256)
- **Тестирование**: Bun test

## Установка и запуск

### Требования

- Bun runtime
- Git 2.20+
- Современный веб-браузер

### Установка зависимостей

```bash
bun install
```

### Запуск в режиме разработки

```bash
bun run dev
```

### Сборка для продакшена

```bash
bun run build
```

### Запуск собранного приложения

```bash
bun run start
```

## Скрипты сборки

### Доступные команды

- `bun run dev` - Запуск сервера разработки
- `bun run build` - Сборка для продакшена (минифицированная)
- `bun run build:dev` - Сборка для разработки (с source maps)
- `bun run start` - Запуск сервера для продакшена
- `bun run serve` - Запуск локального сервера
- `bun run clean` - Очистка папки dist
- `bun run test` - Запуск тестов
- `bun run update-answers` - Обновление хешей ответов

### Конфигурация сборки

Проект использует Bun для сборки с следующими настройками:

- **Target**: Browser
- **Format**: ESM (ES Modules)
- **Minification**: Включена для продакшена
- **Source Maps**: Включены для отладки
- **Code Splitting**: Поддерживается

### Структура собранного приложения

После выполнения `bun run build` в папке `dist/` создаются:

```
dist/
├── index.html    # HTML файл для продакшена
├── App.js        # Собранный JavaScript (минифицированный)
├── App.js.map    # Source map для отладки
└── App.css       # Собранные стили
```

## Структура проекта

```
git-trainer-quiz/
├── package.json          # Конфигурация проекта и зависимости
├── README.md             # Документация проекта
├── public/
│   └── index.html        # HTML шаблон
├── src/
│   ├── App.jsx           # Корневой компонент приложения
│   ├── components/       # React компоненты
│   │   ├── QuizContainer.jsx      # Контейнер викторины
│   │   ├── QuestionComponent.jsx  # Компонент вопроса
│   │   ├── ProgressIndicator.jsx  # Индикатор прогресса
│   │   └── ResultsDisplay.jsx     # Отображение результатов
│   ├── data/            # Данные викторины
│   │   ├── questions.js          # Вопросы викторины
│   │   └── encryptedAnswers.js   # Зашифрованные ответы
│   ├── utils/           # Утилиты
│   │   └── answerValidator.js    # Валидация ответов
│   └── styles/          # Стили
│       └── main.css              # Основные стили
└── dist/                # Собранное приложение (создается при сборке)
```

## Как использовать

1. **Создайте Git-репозиторий** с помощью bash-скрипта:
   ```bash
   ./setup_repository.sh
   ```
2. **Скрипт автоматически обновит хеши ответов** в веб-приложении

3. **Запустите веб-приложение**:
   ```bash
   cd git-trainer-quiz
   bun run dev
   ```
4. **Откройте браузер** и перейдите по адресу, указанному в консоли

5. **Отвечайте на вопросы** викторины, используя команды Git для анализа созданного репозитория

## Вопросы викторины

Викторина содержит 9 вопросов различных типов:

1. **Хеш первого коммита** - найти самый первый коммит в истории
2. **Ключевое слово** - найти спрятанное слово в техническом решении
3. **Название ветки** - определить название ветки для ревью
4. **Файл в .gitignore** - найти игнорируемый файл
5. **Неправильная ставка НДС** - найти исправленную ошибку
6. **Git команда** - команда для просмотра изменений
7. **Хеш коммита со скидкой** - найти коммит в feature ветке
8. **Название тега** - найти созданный тег
9. **Количество коммитов** - подсчитать коммиты в main

## Безопасность

- Правильные ответы хранятся в виде SHA-256 хешей
- Пользовательский ввод нормализуется перед хешированием
- Используется безопасное сравнение хешей
- Правильные ответы не раскрываются в исходном коде

## Разработка

### Добавление новых вопросов

1. Добавьте вопрос в `src/data/questions.js`
2. Добавьте зашифрованный ответ в `src/data/encryptedAnswers.js`
3. Обновите bash-скрипт для генерации соответствующих данных

### Тестирование

```bash
bun test
```

### Создание хеша для нового ответа

```bash
node -e "
const crypto = require('crypto');
const answer = 'ваш_ответ';
const normalized = answer.toLowerCase().trim();
const hash = crypto.createHash('sha256').update(normalized).digest('hex');
console.log('Hash:', hash);
"
```

## Лицензия

MIT

## Автор

Андрей Спрогис - Git квест для Фланта

## Динамическое обновление хешей

Некоторые ответы викторины зависят от данных, которые создаются только при выполнении bash-скрипта:

- **task1**: хеш первого коммита (генерируется Git)
- **task7**: хеш коммита со скидкой ACME (генерируется Git)
- **task9**: количество коммитов в main (зависит от логики скрипта)

### Как это работает:

1. **Bash-скрипт создает Git-репозиторий** и извлекает нужные данные
2. **Вызывается скрипт обновления** `scripts/update-answers.js`
3. **Генерируются SHA-256 хеши** от полученных данных
4. **Обновляется файл** `src/data/encryptedAnswers.js`

### Ручное обновление хешей:

```bash
# Если нужно обновить хеши вручную
bun run scripts/update-answers.js <first_commit_hash> <acme_commit_hash> <commit_count>

# Пример:
bun run scripts/update-answers.js abc123def456 def456ghi789 7
```

### Восстановление плейсхолдеров:

Если нужно вернуть плейсхолдеры (например, для разработки):

```bash
# Замените в src/data/encryptedAnswers.js:
task1: "реальный_хеш" -> task1: "PLACEHOLDER_FIRST_COMMIT_HASH"
task7: "реальный_хеш" -> task7: "PLACEHOLDER_ACME_COMMIT_HASH"
task9: "реальный_хеш" -> task9: "PLACEHOLDER_COMMIT_COUNT_HASH"
```
