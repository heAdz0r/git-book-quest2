#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è Git-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è —Å –∏—Å—Ç–æ—Ä–∏–µ–π –∫–æ–º–º–µ—Ä—á–µ—Å–∫–æ–≥–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
# –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ö–µ—à–µ–π –æ—Ç–≤–µ—Ç–æ–≤ –≤ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

set -e  # –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏ –æ—à–∏–±–∫–µ

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
REPO_NAME="flant-commercial-tutorial"
AUTHOR_NAME="–ê–Ω–¥—Ä–µ–π –°–ø—Ä–æ–≥–∏—Å"
AUTHOR_EMAIL="andrey.sprogis@flant.ru"
MAIN_FILE="book.txt"

# –¶–≤–µ—Ç–∞ –¥–ª—è –≤—ã–≤–æ–¥–∞
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
BLUE='\033[0;34m'
NC='\033[0m' # No Color

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–≤–æ–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
log_info() {
    echo -e "${BLUE}[INFO]${NC} $1"
}

log_success() {
    echo -e "${GREEN}[SUCCESS]${NC} $1"
}

log_warning() {
    echo -e "${YELLOW}[WARNING]${NC} $1"
}

log_error() {
    echo -e "${RED}[ERROR]${NC} $1"
}

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
check_dependencies() {
    log_info "–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π..."
    
    if ! command -v git &> /dev/null; then
        log_error "Git –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
        exit 1
    fi
    
    GIT_VERSION=$(git --version | cut -d' ' -f3)
    if [[ $(echo "$GIT_VERSION 2.20" | tr ' ' '\n' | sort -V | head -n1) != "2.20" ]]; then
        log_error "–¢—Ä–µ–±—É–µ—Ç—Å—è Git –≤–µ—Ä—Å–∏–∏ 2.20 –∏–ª–∏ –≤—ã—à–µ (—Ç–µ–∫—É—â–∞—è: $GIT_VERSION)"
        exit 1
    fi
    
    if ! command -v bun &> /dev/null; then
        log_error "Bun –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
        exit 1
    fi
    
    log_success "–í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã"
}

# –û—á–∏—Å—Ç–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
cleanup_existing() {
    if [ -d "$REPO_NAME" ]; then
        log_warning "–£–¥–∞–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è $REPO_NAME"
        rm -rf "$REPO_NAME"
    fi
}

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
init_repository() {
    log_info "–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Git-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è..."
    
    mkdir "$REPO_NAME"
    cd "$REPO_NAME"
    
    git init
    git config user.name "$AUTHOR_NAME"
    git config user.email "$AUTHOR_EMAIL"
    
    log_success "–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω"
}

# –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–∏—Ç–æ–≤ –≤ main –≤–µ—Ç–∫–µ
create_main_commits() {
    log_info "–°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–º–∏—Ç–æ–≤ –≤ main –≤–µ—Ç–∫–µ..."
    
    # –ü–µ—Ä–≤—ã–π –∫–æ–º–º–∏—Ç - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
    cat > "$MAIN_FILE" << 'EOF'
# –ö–æ–º–º–µ—Ä—á–µ—Å–∫–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –∫–æ–º–ø–∞–Ω–∏–∏ "–†–æ–≥–∞ –∏ –ö–æ–ø—ã—Ç–∞"

## –í–≤–µ–¥–µ–Ω–∏–µ

–î–∞–Ω–Ω–æ–µ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤.

## –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

–ö–æ–º–ø–∞–Ω–∏—è "–†–æ–≥–∞ –∏ –ö–æ–ø—ã—Ç–∞" —Å—Ç–∞–ª–∫–∏–≤–∞–µ—Ç—Å—è —Å –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å—é –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ä–∞–±–æ—á–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤.
EOF
    
    git add "$MAIN_FILE"
    git commit -m "Draft: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫–æ–º–º–µ—Ä—á–µ—Å–∫–æ–≥–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è"
    
    # –ó–∞—Ö–≤–∞—Ç —Ö–µ—à–∞ –ø–µ—Ä–≤–æ–≥–æ –∫–æ–º–º–∏—Ç–∞
    FIRST_COMMIT_HASH=$(git rev-list --max-parents=0 HEAD)
    
    # –í—Ç–æ—Ä–æ–π –∫–æ–º–º–∏—Ç - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è —Å –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–æ–º
    cat >> "$MAIN_FILE" << 'EOF'

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ

–ù–∞—à–µ —Ä–µ—à–µ–Ω–∏–µ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø–æ–ª–Ω—É—é –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –≤—Å–µ—Ö –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç:
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä—É—Ç–∏–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- –ü–æ–≤—ã—Å–∏—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
- –û–±–µ—Å–ø–µ—á–∏—Ç—å –∫–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞
EOF
    
    git add "$MAIN_FILE"
    git commit -m "Update: –î–æ–±–∞–≤–ª–µ–Ω —Ä–∞–∑–¥–µ–ª —Å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º —Ä–µ—à–µ–Ω–∏–µ–º"
    
    log_success "–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–º–∏—Ç—ã —Å–æ–∑–¥–∞–Ω—ã"
}

# –°–æ–∑–¥–∞–Ω–∏–µ –≤–µ—Ç–∫–∏ –¥–ª—è —Ä–µ–≤—å—é
create_review_branch() {
    log_info "–°–æ–∑–¥–∞–Ω–∏–µ –≤–µ—Ç–∫–∏ –¥–ª—è —Ä–µ–≤—å—é..."
    
    git checkout -b review/tech-lead
    
    cat >> "$MAIN_FILE" << 'EOF'

## –°—Ä–æ–∫–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ä–æ–∫–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞: 3 –º–µ—Å—è—Ü–∞
EOF
    
    git add "$MAIN_FILE"
    git commit -m "Review: –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ä–æ–∫–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏"
    
    log_success "–í–µ—Ç–∫–∞ review/tech-lead —Å–æ–∑–¥–∞–Ω–∞"
}

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .gitignore –≤ main
setup_gitignore() {
    log_info "–ù–∞—Å—Ç—Ä–æ–π–∫–∞ .gitignore –≤ main –≤–µ—Ç–∫–µ..."
    
    git checkout main
    
    cat > .gitignore << 'EOF'
notes.txt
*.tmp
EOF
    
    echo "–ù–µ –∑–∞–±—ã—Ç—å —É—Ç–æ—á–Ω–∏—Ç—å –±—é–¥–∂–µ—Ç —É –∫–ª–∏–µ–Ω—Ç–∞" > notes.txt
    
    git add .gitignore
    git commit -m "Infra: –ù–∞—Å—Ç—Ä–æ–µ–Ω —Ñ–∞–π–ª gitignore –¥–ª—è —Å–ª—É–∂–µ–±–Ω—ã—Ö –∑–∞–º–µ—Ç–æ–∫"
    
    log_success ".gitignore –Ω–∞—Å—Ç—Ä–æ–µ–Ω"
}

# –°–ª–∏—è–Ω–∏–µ –≤–µ—Ç–∫–∏ —Ä–µ–≤—å—é
merge_review_branch() {
    log_info "–°–ª–∏—è–Ω–∏–µ –≤–µ—Ç–∫–∏ review/tech-lead..."
    
    git merge review/tech-lead --no-ff -m "Merge: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø–æ—Å–ª–µ —Ä–µ–≤—å—é —Ç–µ—Ö.–ª–∏–¥–∞"
    
    log_success "–í–µ—Ç–∫–∞ review/tech-lead —Å–ª–∏—Ç–∞"
}

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ —Å –æ—à–∏–±–∫–æ–π –ù–î–°
add_cost_with_error() {
    log_info "–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –ù–î–°..."
    
    cat >> "$MAIN_FILE" << 'EOF'

## –°—Ç–æ–∏–º–æ—Å—Ç—å

–°—Ç–æ–∏–º–æ—Å—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞: 1,000,000 —Ä—É–±. (–≤–∫–ª—é—á–∞—è –ù–î–° 18%)
EOF
    
    git add "$MAIN_FILE"
    git commit -m "Update: –î–æ–±–∞–≤–ª–µ–Ω —Ä–∞–∑–¥–µ–ª —Å–æ —Å—Ç–æ–∏–º–æ—Å—Ç—å—é"
    
    log_success "–°—Ç–æ–∏–º–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∞"
}

# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞–≤–∫–∏ –ù–î–°
fix_vat_rate() {
    log_info "–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞–≤–∫–∏ –ù–î–°..."
    
    sed -i 's/–ù–î–° 18%/–ù–î–° 20%/g' "$MAIN_FILE"
    
    git add "$MAIN_FILE"
    git commit -m "Fix: –°–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∞ —Å—Ç–∞–≤–∫–∞ –ù–î–° –Ω–∞ –∞–∫—Ç—É–∞–ª—å–Ω—É—é"
    
    log_success "–°—Ç–∞–≤–∫–∞ –ù–î–° –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞"
}

# –°–æ–∑–¥–∞–Ω–∏–µ –≤–µ—Ç–∫–∏ –¥–ª—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–≥–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
create_special_offer_branch() {
    log_info "–°–æ–∑–¥–∞–Ω–∏–µ –≤–µ—Ç–∫–∏ –¥–ª—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–≥–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è..."
    
    git checkout -b feature/special-offer-acme
    
    sed -i 's/–†–æ–≥–∞ –∏ –ö–æ–ø—ã—Ç–∞/ACME Corp/g' "$MAIN_FILE"
    
    cat >> "$MAIN_FILE" << 'EOF'

## –°–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ

–î–ª—è –∫–æ–º–ø–∞–Ω–∏–∏ ACME Corp –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è —Å–∫–∏–¥–∫–∞ 15% –Ω–∞ –≤—Å–µ —É—Å–ª—É–≥–∏.
EOF
    
    git add "$MAIN_FILE"
    git commit -m "Feat: –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ö–ü –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–∫–∏–¥–∫–∏ –¥–ª—è ACME Corp"
    
    # –ó–∞—Ö–≤–∞—Ç —Ö–µ—à–∞ –∫–æ–º–º–∏—Ç–∞ —Å–æ —Å–∫–∏–¥–∫–æ–π ACME
    ACME_COMMIT_HASH=$(git rev-parse HEAD)
    
    log_success "–í–µ—Ç–∫–∞ feature/special-offer-acme —Å–æ–∑–¥–∞–Ω–∞"
}

# –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ–≥–∞ –¥–ª—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏
create_final_tag() {
    log_info "–°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ–≥–∞ –¥–ª—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏..."
    
    git checkout main
    
    git tag -a v1.0-sent -m '–§–∏–Ω–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è –ö–ü, –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –∫–ª–∏–µ–Ω—Ç—É "–†–æ–≥–∞ –∏ –ö–æ–ø—ã—Ç–∞"'
    
    log_success "–¢–µ–≥ v1.0-sent —Å–æ–∑–¥–∞–Ω"
}

# –ü–æ–¥—Å—á–µ—Ç –∫–æ–º–º–∏—Ç–æ–≤ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ö–µ—à–µ–π
update_quiz_answers() {
    log_info "–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ö–µ—à–µ–π –æ—Ç–≤–µ—Ç–æ–≤ –≤ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏..."
    
    # –ü–æ–¥—Å—á–µ—Ç –∫–æ–º–º–∏—Ç–æ–≤ –≤ main
    COMMIT_COUNT=$(git rev-list --count main)
    
    # –ü–µ—Ä–µ—Ö–æ–¥ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    cd ../git-trainer-quiz
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
    if [ ! -f "scripts/update-answers.js" ]; then
        log_error "–°–∫—Ä–∏–ø—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω"
        exit 1
    fi
    
    # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ö–µ—à–µ–π
    if bun run scripts/update-answers.js "$FIRST_COMMIT_HASH" "$ACME_COMMIT_HASH" "$COMMIT_COUNT"; then
        log_success "–•–µ—à–∏ –æ—Ç–≤–µ—Ç–æ–≤ –æ–±–Ω–æ–≤–ª–µ–Ω—ã"
    else
        log_error "–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Ö–µ—à–µ–π –æ—Ç–≤–µ—Ç–æ–≤"
        exit 1
    fi
    
    cd ..
}

# –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
display_results() {
    log_info "–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:"
    echo
    echo "üìÅ –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: $REPO_NAME"
    echo "üë§ –ê–≤—Ç–æ—Ä: $AUTHOR_NAME <$AUTHOR_EMAIL>"
    echo
    echo "üîë –ö–ª—é—á–∏ –æ—Ç–≤–µ—Ç–æ–≤ –¥–ª—è –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã:"
    echo "   Task 1 (–ø–µ—Ä–≤—ã–π –∫–æ–º–º–∏—Ç): $FIRST_COMMIT_HASH"
    echo "   Task 2 (–∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ): –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å"
    echo "   Task 3 (–≤–µ—Ç–∫–∞ —Ä–µ–≤—å—é): review/tech-lead"
    echo "   Task 4 (—Ñ–∞–π–ª –≤ .gitignore): notes.txt"
    echo "   Task 5 (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ù–î–°): 18%"
    echo "   Task 6 (–∫–æ–º–∞–Ω–¥–∞ diff): git diff HEAD~1 HEAD"
    echo "   Task 7 (–∫–æ–º–º–∏—Ç ACME): $ACME_COMMIT_HASH"
    echo "   Task 8 (—Ç–µ–≥): v1.0-sent"
    echo "   Task 9 (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–æ–º–º–∏—Ç–æ–≤): $COMMIT_COUNT"
    echo
    echo "üöÄ –î–ª—è –∑–∞–ø—É—Å–∫–∞ –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã:"
    echo "   cd git-trainer-quiz"
    echo "   bun run dev"
    echo
    log_success "–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –≥–æ—Ç–æ–≤ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è!"
}

# –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
main() {
    echo "üéØ –°–æ–∑–¥–∞–Ω–∏–µ Git-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –¥–ª—è –æ–±—É—á–µ–Ω–∏—è"
    echo "=========================================="
    echo
    
    check_dependencies
    cleanup_existing
    init_repository
    create_main_commits
    create_review_branch
    setup_gitignore
    merge_review_branch
    add_cost_with_error
    fix_vat_rate
    create_special_offer_branch
    create_final_tag
    update_quiz_answers
    display_results
}

# –ó–∞–ø—É—Å–∫ –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏
main "$@"